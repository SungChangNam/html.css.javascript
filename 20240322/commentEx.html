<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/20240322/css/comm.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

    <script>
        $(function () {
            $("#comment_form").submit(function () {
                // 작성자 검사
                if (!$("#user_name").val()) {
                    alert("이름을 입력해주세요!");
                    $("#user_name").focus();
                    return false;
                }

                // 내용 검사
                if (!$("#comment").val()) {
                    alert("내용을 입력해주세요!");
                    $("#comment").focus();
                    return false;
                }

                // 현재 날짜 및 시간 생성
                var date = new Date();
                var yy = date.getFullYear();
                var mm = date.getMonth() + 1;
                var dd = date.getDate();
                var hh = date.getHours();
                var mi = date.getMinutes();
                var ss = date.getSeconds();

                // 자리수 보정
                if (mm < 10) mm = "0" + mm;
                if (dd < 10) dd = "0" + dd;
                if (hh < 10) hh = "0" + hh;
                if (mi < 10) mi = "0" + mi;
                if (ss < 10) ss = "0" + ss;

                var today = yy + "-" + mm + "-" + dd + " " + hh + ":" + mi + ":" + ss;

                // 새 댓글 li 태그 생성
                var new_li = $("<li>");
                new_li.addClass("comment_item");

                // 작성자 정보
                var writer_p = $("<p>");
                writer_p.addClass("writer");

                var name_span = $("<span>");
                name_span.addClass("name");
                name_span.html($("#user_name").val() + "님");

                var date_span = $("<span>");
                date_span.html("/" + today + " ");

                // 삭제 버튼
                var del_input = $("<input>");
                del_input.attr({
                    type: "button",
                    value: "삭제",
                });
                del_input.addClass("delete_btn");

                // 내용
                var comment_p = $("<p>");
                comment_p.html($("#comment").val());

                // 조합
                writer_p.append(name_span).append(date_span).append(del_input);
                new_li.append(writer_p).append(comment_p);

                $("#comment_list").append(new_li);

                // 작성자 및 내용 초기화
                $("#user_name").val("");
                $("#comment").val("");

                return false;
            });

            // 삭제 버튼 클릭 이벤트 처리
            $(document).on("click", ".delete_btn", function () {
                if (confirm("선택하신 댓글을 정말로 삭제하시겠습니까?")) {
                    $(this).parents(".comment_item").remove();
                }
            });
        });

    </script>
</head>

<body>

    <div id="container">
        <h1>댓글 쓰기</h1>
        <div id="comment_write">
            <form action="" id="comment_form">

                <div>
                    <label for="user_name">작성자</label>
                    <input type="text" name="user_name" id="user_name">
                    <input type="submit" value="저장" id="">
                </div>

                <div>

                    <label for="comment">댓글내용</label>
                    <textarea name="comment" id="comment"></textarea>

                </div>
            </form>
        </div>
        <ul id="comment_list">

        </ul>
    </div>

</body>

</html>